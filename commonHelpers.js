import"./assets/header-1d09e868.js";import{a as v,i as A,S as T}from"./assets/vendor-169f9f98.js";const S=document.querySelector(".loader");function O(){S.style.display="flex"}function N(){S.style.display="none"}const j=document.querySelector(".best-books-gallery"),z=v.create({baseURL:"https://books-backend.p.goit.global/books"});async function L(){try{O();const e=await z.get("/top-books");return N(),e.data}catch{A.error({position:"topRight",message:"Sorry, no books were found. Please try again."})}}L();function _({list_name:e,books:t}){return`
    <li class="book-category-item">
      <p class="book-category">${e}</p>
      <ul class="top-books">
        ${t.map(o=>`
              <li class="book-card" data-id="${o._id}">
              <div class="book-card-hover">
                <img class="book-cover" src="${o.book_image}" alt="${o.title}"/>
                <div class="view-more">
                <p class="view-more-text">quick view</p>
                </div>
                </div>
                <div class="book-descr">
                <h2 class="book-name">${o.title}</h2>
                <h3 class="book-author">${o.author}</h3>
                </div>
              </li>
            `).join("")}
      </ul>
      <button class="book-card-btn" type="button" data-category="${e}">see more</button>
    </li>
  `}async function H(){const e=await L();let t="";for(let s of e)t+=_(s);const n=` <h1 class="collection-title">Best Sellers <span>Books</span></h1>${`<ul class="top-books-all">${t}</ul>`}`;j.innerHTML=n}H();const J=document.querySelector(".signup-btn"),B=document.querySelector(".form-container"),P=document.querySelector(".close-btn");J.addEventListener("click",()=>{B.classList.add("visible")});P.addEventListener("click",()=>{B.classList.remove("visible")});const p="local-storage-books";let d,k=d;document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("container"),t=document.getElementById("myModal"),o=document.getElementById("shoppingListBtn"),n=document.getElementById("closeModalBtn"),s=document.getElementById("notification"),r=document.querySelector(".modal-content");e.addEventListener("click",function(i){const l=i.target.closest(".book-card");l&&(d=l.dataset.id,k=d,console.log(d),$(d))}),n.addEventListener("click",function(){b()}),window.addEventListener("click",function(i){i.target===t&&b()}),o.addEventListener("click",function(){g()});function g(){o.dataset.bookId,o.textContent==="Add to shopping list"?(c(),q("Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”."),C()):(x(),I(),u(),o.textContent="Add to shopping list")}async function c(){const i=localStorage.getItem(p);let l;try{l=i?JSON.parse(i):[]}catch(a){console.log("Помилка при парсингу JSON:",a);return}const m={dataId:d};if(l.every(a=>a.dataId!==m.dataId)){l.push(m);const a=JSON.stringify(l);try{localStorage.setItem(p,a)}catch(M){console.log("Помилка при зберіганні даних:",M)}}o.textContent="Remove from the shopping list"}async function u(i){const l=JSON.parse(localStorage.getItem(p))||[],m=l.findIndex(a=>a.dataId===k);m!==-1?(l.splice(m,1),localStorage.setItem(p,JSON.stringify(l)),o.textContent="Add to shopping list"):console.log("Book with dataId:",k,"not found in localStorage")}function q(i){s.innerHTML=`<span>${i}</span>`,s.style.display="block"}function x(){s.style.display="none"}function C(){r.classList.add("expanded")}function I(){r.classList.remove("expanded")}function $(i){R(i),t.style.display="block",document.body.style.overflow="hidden"}function b(){t.style.display="none",document.body.style.overflow="auto"}});function R(e){fetch("https://books-backend.p.goit.global/books/top-books").then(t=>t.json()).then(t=>{for(const o of t){const n=o.books.find(s=>s._id===e);if(n){W(n);return}}console.error("Book not found.")}).catch(t=>console.error("Error fetching data:",t))}function W(e){const t=document.querySelector(".book_name"),o=document.querySelector(".author"),n=document.querySelector(".description"),s=document.querySelector(".img_modal"),r=document.querySelector('.links a[name="Amazon"]'),g=document.querySelector('.links a[name="Apple Books"]');if(t.textContent=e.title,o.textContent=e.author,n.textContent=e.description,s.src=e.book_image,r){const c=e.buy_links.find(u=>u.name==="Amazon");c&&(r.href=c.url)}if(g){const c=e.buy_links.find(u=>u.name==="Apple Books");c&&(g.href=c.url)}}setInterval(()=>{console.log(localStorage)},2e3);const y=document.querySelector(".scroll-btn"),D=e=>{window.scrollTo({top:e.offsetTop,behavior:"smooth"})},E=()=>{const e=document.querySelector(".collection-title");e?(y.addEventListener("click",()=>{D(e)}),window.addEventListener("scroll",()=>{(window.scrollY||window.pageYOffset)>e.offsetTop?y.classList.add("show-scroll-btn"):y.classList.remove("show-scroll-btn")})):setTimeout(E,100)};E();const Y=[{title:"Save the Children",url:"https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis",img:"./img/save.png",img2x:"./img/save.png"},{title:"Project HOPE",url:"https://www.projecthope.org/country/ukraine/",img:"./img/hope.png",img2x:"./img/hope.png"},{title:"UNITED24",url:"https://u24.gov.ua/uk",img:"./img/united.png",img2x:"./img/united.png"},{title:"International Medical Corps",url:"https://internationalmedicalcorps.org/country/ukraine/",img:"./img/medical.png",img2x:"./img/medical.png"},{title:"Medicins Sans Frontieres",url:"https://www.msf.org/ukraine",img:"./img/medicins.png",img2x:"./img/medicins.png"},{title:"RAZOM",url:"https://www.razomforukraine.org/",img:"./img/razom.png",img2x:"./img/razom.png"},{title:"Action against hunger",url:"https://www.actionagainsthunger.org/location/europe/ukraine/",img:"./img/action.png",img2x:"./img/action.png"},{title:"World vision",url:"https://www.wvi.org/emergencies/ukraine",img:"./img/world.png",img2x:"./img/world.png"},{title:"Serhiy Prytula Charity Foundation",url:"https://prytulafoundation.org/en",img:"./img/prytula.png",img2x:"./img/prytula.png"}],F=({title:e,url:t,img:o,img2x:n},s)=>`<li class="block-list-item swiper-slide"> 
          <span class="fund-number">${s}</span>
          <a class="block-link" href="${t}" target="_blank">
            <img class="fund-logo" srcset="${o} 1x, ${n} 2x" src="${o}" alt="${e}" loading="lazy" />
          </a>
        </li>`,U=document.querySelector(".support-list"),G=document.querySelector(".support-button");let w=0,h=!1;const Z=e=>String(e).padStart(2,"0"),K=Y.map((e,t)=>(w=Z(t+1),F(e,w))).join("");U.innerHTML=K;const f=new T(".swiper",{direction:"vertical",spaceBetween:20,slidesPerView:"auto",rewind:!0,speed:500,autoplay:{delay:5e3,disableOnInteraction:!1},navigation:{nextEl:".support-button"}}),V=()=>{const e=f.slides.length-1;window.innerWidth<768?f.slideNext():(f.slideTo(h?0:e),h=!h)};G.addEventListener("click",V);document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".sidebar");window.addEventListener("scroll",function(){window.scrollY>100?e.classList.add("scrolled"):e.classList.remove("scrolled")})});document.querySelector("#toggle");document.querySelector("body");document.querySelectorAll("p");document.querySelectorAll("h1");document.querySelectorAll("h2");document.querySelectorAll("h3");document.querySelectorAll("h4");document.querySelectorAll("h5");document.querySelectorAll("h6");document.querySelectorAll("a");document.querySelectorAll(".book-card-btn");const Q=document.querySelector(".best-books-gallery");Q.addEventListener("click",X);function X(e){if(e.target.nodeName!=="BUTTON")return;const t=e.target;try{if(t.matches("button[data-category]")){const o=t.dataset.category;ee(o).then(n=>{oe(n,o)}).catch(n=>{})}}catch(o){console.log(o)}}async function ee(e){try{return(await v.get(`https://books-backend.p.goit.global/books/category?category=${e}`)).data}catch(t){console.log(t);return}}function te({_id:e,book_image:t,title:o,author:n}){return`
    <li class="book-card-category" data-id="${e}">
      <div class="book-thumb">
        <img class="book-cover-cat" src="${t}" alt="${o}"/>
        <div class="view-more view-more-cat">
        <p class="view-more-text">quick view</p>
        </div>
        </div>
        <div class="book-descr">
        <h2 class="book-namne-cat">${o}</h2>
        <h3 class="book-author">${n}</h3>
        </div>
      </li>`}function oe(e,t){const n=`<ul class="category-books-cat">${e.map(te).join("")}</ul>`,s=`<h2 class="collection-title">${ne(t)} <span>${se(t)}</span></h2> ${n}`,r=document.querySelector(".best-books-gallery");r.innerHTML=s}function ne(e){let t=e.split(" ");return t.pop(),t.join(" ")}function se(e){let t=e.trim().split(" ");return t[t.length-1]}
//# sourceMappingURL=commonHelpers.js.map
