{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shoppingList.js"],"sourcesContent":["import axios from 'axios';\n\n\n\nconst slistGalleryEl = document.querySelector('.slist-card-section');\nconst background = document.querySelector('.slist-demo-thumb');\n\n\n// import { STORAGE_KEY } from \"./local-storage\"          //ключ\nconst STORAGE_KEY = \"local-storage-books\"; \nlet booksIDarray = [];\n\n\n//  закидаємо до ЛС обєкт \nfunction loadFromLS(key) {\n  try {\n   \n      const data = localStorage.getItem(key);\n      const result = JSON.parse(data);\n      console.log(result);\n      booksIDarray = result.map(item => item.dataId);   \n      console.log(booksIDarray);\n        return booksIDarray;\n  } catch {console.log('error');\n    showbackground(); }\n         \n};\nconst arrOfId = loadFromLS(STORAGE_KEY);\n\n\nrenderImages(arrOfId);     //рендеримо розмітку\n\nasync function renderImages(array) {\n   let booksArr = [];\n  if (array === null || array.length===0 || !STORAGE_KEY) {\n    \n      showbackground(); \n      \n  } else {\n      for (const item of array) {\n          \n          \n          const currentBook = await getbook(item);\n          booksArr.push(currentBook);\n        //   return booksArr;\n           \n      }\n           const markup = imagesTemplate(booksArr);\n            slistGalleryEl.innerHTML = markup;\n            slistGalleryEl.addEventListener('click', onBtnClick);\n    } \n};\n\n\n  \nfunction imageTemplate({ _id, book_image,title,list_name,description,author,amazonURL,appleURL}) {\n  return `<div class=\"slist-card-list\">\n            <div class=\"slist-card-item\">\n              <button type=\"button\" data-id=${_id} class=\"slist-del-btn js-slist-del-btn\">\n              </button>\n              <div class=\"slist-card-picture\">\n                <img src=\"${book_image}\" class=\"slist-book-img\" alt=\"books\" />\n              </div>\n              <div class=\"slist-info-container\">\n                <h3 class=\"slist-book-header\">${title}</h3>\n                <h4 class=\"slist-book-category\">${list_name}</h4>\n                <p class=\"slist-book-description\">${description}</p>\n                <h5 class=\"slist-book-autor\">${author}</h5>\n\n                <div class=\"slist-nav\">\n                  <ul class=\"slist-nav-list\">\n                    <li class=\"slist-nav-item\">\n                      <a href=\"${amazonURL}\" class=\"slist-nav-link\">\n\n                      <img class=\"img-amazone logo\" src=\"./img/amazonicon.png\" alt=\"app\">\n                     </a>\n\n                    </li>\n\n                    <li class=\"slist-nav-item\">\n                      <a href=\"${appleURL}\" class=\"slist-nav-link\"><img class=\"img-app logo\" src=\"./img/appbook.png\" alt=\"app\"></a>\n                      \n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>`};\n\n          function imagesTemplate(array) {\n  return array.map(imageTemplate).join('');\n      \n};\n\n\n\n          \n\n async function onBtnClick(e) {\n   if (e.target.nodeName === 'BUTTON') {\n    console.log(e.target.dataset.id);\n  \n    let bookItemId = (e.target.dataset.id);//знаходимо по ід на кнопку повішену\n   \n    const jsonString = localStorage.getItem(myStoreKey);\n    let currentArray = JSON.parse(jsonString);\n\n           \n       \n    if (currentArray.length <= 1) {\n      localStorage.removeItem(STORAGE_KEY);\n      slistGalleryEl.innerHTML = \"\";\n      showbackground(); \n    }\n    else {\n        localStorage.removeItem(STORAGE_KEY);\n     let newArr = currentArray.splice(\n      currentArray.findIndex(item => item.id === bookItemId),\n      1\n       );\n      slistGalleryEl.innerHTML = \"\";\n      const updatedJsonString = JSON.stringify(newArr)\n      localStorage.setItem(STORAGE_KEY, updatedJsonString)\n      renderImages((newArr.map(item => item.dataId)));\n      \n\n    };\n        \n      \n  };\n\n\n};\n\n\n\n\n\nasync function getbook(bookId) {\n    const BASE_URL = `https://books-backend.p.goit.global/books/${bookId}`;\n    \n    try {\n        const res = await axios.get(BASE_URL);\n        return res.data;\n\n   \n    } catch (error) {\n        console.log('Результатів не знайдено.');\n    };\n\n};\n\n\nfunction hidebackground() {\n    background.classList.add('is-hidden');\n};\n\n\nfunction showbackground() {\n  background.classList.remove('is-hidden');\n\n};\n\n\n\n\n\n\n\n"],"names":["slistGalleryEl","background","STORAGE_KEY","booksIDarray","loadFromLS","key","data","result","item","showbackground","arrOfId","renderImages","array","booksArr","currentBook","getbook","markup","imagesTemplate","onBtnClick","imageTemplate","_id","book_image","title","list_name","description","author","amazonURL","appleURL","e","bookItemId","jsonString","currentArray","newArr","updatedJsonString","bookId","BASE_URL","axios"],"mappings":"oFAIA,MAAMA,EAAiB,SAAS,cAAc,qBAAqB,EAC7DC,EAAa,SAAS,cAAc,mBAAmB,EAIvDC,EAAc,sBACpB,IAAIC,EAAe,CAAA,EAInB,SAASC,EAAWC,EAAK,CACvB,GAAI,CAEA,MAAMC,EAAO,aAAa,QAAQD,CAAG,EAC/BE,EAAS,KAAK,MAAMD,CAAI,EAC9B,eAAQ,IAAIC,CAAM,EAClBJ,EAAeI,EAAO,IAAIC,GAAQA,EAAK,MAAM,EAC7C,QAAQ,IAAIL,CAAY,EACfA,CACZ,MAAO,CAAC,QAAQ,IAAI,OAAO,EAC1BM,EAAgB,CAAG,CAEvB,CACA,MAAMC,EAAUN,EAAWF,CAAW,EAGtCS,EAAaD,CAAO,EAEpB,eAAeC,EAAaC,EAAO,CAChC,IAAIC,EAAW,CAAA,EAChB,GAAID,IAAU,MAAQA,EAAM,SAAS,GAAK,CAACV,EAEvCO,QAEG,CACH,UAAWD,KAAQI,EAAO,CAGtB,MAAME,EAAc,MAAMC,EAAQP,CAAI,EACtCK,EAAS,KAAKC,CAAW,CAG5B,CACI,MAAME,EAASC,EAAeJ,CAAQ,EACrCb,EAAe,UAAYgB,EAC3BhB,EAAe,iBAAiB,QAASkB,CAAU,CAC1D,CACL,CAIA,SAASC,EAAc,CAAE,IAAAC,EAAK,WAAAC,EAAW,MAAAC,EAAM,UAAAC,EAAU,YAAAC,EAAY,OAAAC,EAAO,UAAAC,EAAU,SAAAC,CAAQ,EAAG,CAC/F,MAAO;AAAA;AAAA,8CAEqCP,CAAG;AAAA;AAAA;AAAA,4BAGrBC,CAAU;AAAA;AAAA;AAAA,gDAGUC,CAAK;AAAA,kDACHC,CAAS;AAAA,oDACPC,CAAW;AAAA,+CAChBC,CAAM;AAAA;AAAA;AAAA;AAAA;AAAA,iCAKpBC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAQTC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAOxB,CAEP,SAASV,EAAeL,EAAO,CACvC,OAAOA,EAAM,IAAIO,CAAa,EAAE,KAAK,EAAE,CAEzC,CAMC,eAAeD,EAAWU,EAAG,CAC3B,GAAIA,EAAE,OAAO,WAAa,SAAU,CACnC,QAAQ,IAAIA,EAAE,OAAO,QAAQ,EAAE,EAE/B,IAAIC,EAAcD,EAAE,OAAO,QAAQ,GAEnC,MAAME,EAAa,aAAa,QAAQ,UAAU,EAClD,IAAIC,EAAe,KAAK,MAAMD,CAAU,EAIxC,GAAIC,EAAa,QAAU,EACzB,aAAa,WAAW7B,CAAW,EACnCF,EAAe,UAAY,GAC3BS,QAEG,CACD,aAAa,WAAWP,CAAW,EACtC,IAAI8B,EAASD,EAAa,OACzBA,EAAa,UAAUvB,GAAQA,EAAK,KAAOqB,CAAU,EACrD,CACN,EACM7B,EAAe,UAAY,GAC3B,MAAMiC,EAAoB,KAAK,UAAUD,CAAM,EAC/C,aAAa,QAAQ9B,EAAa+B,CAAiB,EACnDtB,EAAcqB,EAAO,IAAIxB,GAAQA,EAAK,MAAM,EAIlD,CAGA,CAEA,CAMA,eAAeO,EAAQmB,EAAQ,CAC3B,MAAMC,EAAW,6CAA6CD,CAAM,GAEpE,GAAI,CAEA,OADY,MAAME,EAAM,IAAID,CAAQ,GACzB,IAGd,MAAe,CACZ,QAAQ,IAAI,0BAA0B,CAE9C,CACA,CAQA,SAAS1B,GAAiB,CACxBR,EAAW,UAAU,OAAO,WAAW,CAEzC"}